(function(){"use strict";var A={6199:function(A,e,t){var a=t(5130),s=t(6768);const l={id:"app"};function n(A,e,t,a,n,o){const r=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",l,[(0,s.bF)(r)])}var o={name:"App"},r=t(1241);const c=(0,r.A)(o,[["render",n]]);var i=c,d=t(1387),u=t(4232);const f={class:"mind-map-app"},v={class:"pdf-upload-section pa-md-12 pa-6 rounded-lg elevation-1"},p={class:"button-container"},m={key:0,class:"mt-4"},b={class:"process-status"},g={class:"process-text"},h=["innerHTML"],k={class:"mindmap-section pa-md-4 pa-2 elevation-2 rounded flex-grow-1"},x={id:"map",ref:"map",class:"mind-map-container"},w={class:"export-buttons mt-4"},y={class:"shortcut-section pa-md-4 pa-3 elevation-2 rounded flex-grow-1"},C={class:"shortcut-scroll"},L={class:"shortcut-table"},F={class:"shortcut-key"},X={class:"shortcut-func"};function O(A,e,t,l,n,o){const r=(0,s.g2)("Header"),c=(0,s.g2)("v-btn"),i=(0,s.g2)("v-progress-linear"),d=(0,s.g2)("v-col"),O=(0,s.g2)("v-row"),q=(0,s.g2)("v-spacer"),W=(0,s.g2)("v-container"),V=(0,s.g2)("Footer");return(0,s.uX)(),(0,s.CE)("div",f,[(0,s.bF)(r),(0,s.bF)(W,{class:"pa-4 pa-sm-2",fluid:"",style:{"max-width":"1800px",margin:"auto"}},{default:(0,s.k6)((()=>[(0,s.bF)(O,null,{default:(0,s.k6)((()=>[(0,s.bF)(d,{cols:"12"},{default:(0,s.k6)((()=>[(0,s.Lk)("section",v,[e[4]||(e[4]=(0,s.Lk)("h2",{class:"mb-4 text-h4 text-md-h4 text-sm-h5 text-xs-h6"}," 上傳 PDF 檔案 ",-1)),e[5]||(e[5]=(0,s.Lk)("div",{class:"upload-guide mb-4"},[(0,s.Lk)("p",null," 法文史料上傳，系統的雙層AI (Gemini 1.5 Pro核心) 即時生成互動心智圖。複雜歷史視覺化，助您高效理解、輕鬆記憶！ ")],-1)),(0,s.Lk)("form",{onSubmit:e[2]||(e[2]=(0,a.D$)(((...A)=>o.uploadFile&&o.uploadFile(...A)),["prevent"])),class:"upload-form"},[(0,s.Lk)("input",{type:"file",id:"pdfFile",accept:".pdf",ref:"fileInput",required:"",onChange:e[0]||(e[0]=(...A)=>o.handleFileChange&&o.handleFileChange(...A)),style:{display:"none"}},null,544),(0,s.Lk)("div",p,[(0,s.bF)(c,{color:"primary",onClick:e[1]||(e[1]=e=>A.$refs.fileInput.click()),class:"upload-btn"},{default:(0,s.k6)((()=>[(0,s.eW)((0,u.v_)(n.fileName||"點擊選擇檔案"),1)])),_:1}),(0,s.bF)(c,{type:"submit",color:"success",class:"ml-md-3 mt-2 mt-md-0 upload-btn",disabled:n.processing},{default:(0,s.k6)((()=>e[3]||(e[3]=[(0,s.eW)("上傳")]))),_:1},8,["disabled"])])],32),n.processing?((0,s.uX)(),(0,s.CE)("div",m,[(0,s.Lk)("div",b,[(0,s.Lk)("div",g,(0,u.v_)(n.processStage),1),(0,s.bF)(i,{color:"primary",height:"20",value:n.progress,striped:"","buffer-value":"0"},{default:(0,s.k6)((()=>[(0,s.eW)((0,u.v_)(Math.ceil(n.progress))+"% ",1)])),_:1},8,["value"])])])):(0,s.Q3)("",!0),(0,s.Lk)("div",{innerHTML:n.resultMessage,class:"mt-4"},null,8,h)])])),_:1})])),_:1}),(0,s.bF)(O,{class:"mt-8 mind-map-row",dense:""},{default:(0,s.k6)((()=>[(0,s.bF)(d,{cols:"12",md:"9",sm:"12",class:"px-md-4 px-2 d-flex flex-column"},{default:(0,s.k6)((()=>[(0,s.Lk)("section",k,[e[10]||(e[10]=(0,s.Lk)("h2",{class:"mb-3"},"我的心智圖",-1)),(0,s.Lk)("div",x,null,512),(0,s.Lk)("div",w,[(0,s.bF)(c,{color:"success",class:"me-2 mb-2 mb-md-0 export-btn",onClick:o.exportPng},{default:(0,s.k6)((()=>e[6]||(e[6]=[(0,s.Lk)("span",{class:"d-none d-sm-block"},"匯出 PNG 檔案",-1),(0,s.Lk)("span",{class:"d-block d-sm-none"},"PNG",-1)]))),_:1},8,["onClick"]),(0,s.bF)(c,{color:"info",class:"me-2 mb-2 mb-md-0 export-btn",onClick:o.exportSvg},{default:(0,s.k6)((()=>e[7]||(e[7]=[(0,s.Lk)("span",{class:"d-none d-sm-block"},"匯出 SVG 向量圖",-1),(0,s.Lk)("span",{class:"d-block d-sm-none"},"SVG",-1)]))),_:1},8,["onClick"]),(0,s.bF)(c,{color:"warning",class:"me-2 mb-2 mb-md-0 export-btn",onClick:o.exportJson},{default:(0,s.k6)((()=>e[8]||(e[8]=[(0,s.Lk)("span",{class:"d-none d-sm-block"},"匯出 JSON 結構",-1),(0,s.Lk)("span",{class:"d-block d-sm-none"},"JSON",-1)]))),_:1},8,["onClick"]),(0,s.bF)(q,{class:"d-none d-md-block"}),(0,s.bF)(c,{color:"primary",class:"export-btn quiz-btn",onClick:o.generateQuiz},{default:(0,s.k6)((()=>e[9]||(e[9]=[(0,s.Lk)("span",{class:"d-none d-sm-block"},"儲存後生成測驗",-1),(0,s.Lk)("span",{class:"d-block d-sm-none"},"生成測驗",-1)]))),_:1},8,["onClick"])])])])),_:1}),(0,s.bF)(d,{cols:"12",md:"3",sm:"12",class:"px-md-4 px-2 mt-4 mt-md-0 d-flex flex-column"},{default:(0,s.k6)((()=>[(0,s.Lk)("section",y,[e[11]||(e[11]=(0,s.Lk)("h2",{class:"mb-3"},"快捷鍵說明",-1)),(0,s.Lk)("div",C,[(0,s.Lk)("table",L,[(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.shortcuts,((A,e)=>((0,s.uX)(),(0,s.CE)("tr",{key:e},[(0,s.Lk)("td",F,(0,u.v_)(A.key),1),(0,s.Lk)("td",X,(0,u.v_)(A.function),1)])))),128))])])])])])),_:1})])),_:1})])),_:1}),(0,s.bF)(V)])}t(8111),t(7588),t(1701);var q="data:image/png;base64,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";const W={class:"header"};function V(A,e,t,a,l,n){const o=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("header",W,[e[6]||(e[6]=(0,s.Lk)("div",{class:"logo"},"法國歷史全覽圖",-1)),(0,s.Lk)("div",{class:(0,u.C4)(["hamburger",{active:l.menuOpen}]),onClick:e[0]||(e[0]=(...A)=>n.toggleMenu&&n.toggleMenu(...A))},e[2]||(e[2]=[(0,s.Lk)("img",{src:q,alt:"Menu",class:"hamburger-icon"},null,-1)]),2),(0,s.Lk)("nav",{class:(0,u.C4)(["nav",{"nav-open":l.menuOpen}])},[(0,s.Lk)("ul",null,[(0,s.Lk)("li",null,[(0,s.bF)(o,{to:"/homepage",onClick:n.closeMenu},{default:(0,s.k6)((()=>e[3]||(e[3]=[(0,s.eW)("首頁")]))),_:1},8,["onClick"])]),(0,s.Lk)("li",null,[(0,s.bF)(o,{to:"/mindmap",onClick:n.closeMenu},{default:(0,s.k6)((()=>e[4]||(e[4]=[(0,s.eW)("心智圖")]))),_:1},8,["onClick"])]),(0,s.Lk)("li",null,[(0,s.bF)(o,{to:"/quizpage",onClick:n.closeMenu},{default:(0,s.k6)((()=>e[5]||(e[5]=[(0,s.eW)("小測驗")]))),_:1},8,["onClick"])])])],2),l.menuOpen?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"menu-overlay",onClick:e[1]||(e[1]=(...A)=>n.closeMenu&&n.closeMenu(...A))})):(0,s.Q3)("",!0)])}var M={data(){return{menuOpen:!1}},methods:{toggleMenu(){this.menuOpen=!this.menuOpen},closeMenu(){this.menuOpen=!1}}};const D=(0,r.A)(M,[["render",V],["__scopeId","data-v-699df458"]]);var Q=D;const z={class:"footer"};function U(A,e){return(0,s.uX)(),(0,s.CE)("footer",z,e[0]||(e[0]=[(0,s.Fv)('<div class="footer-container" data-v-cd470dbc><div class="footer-grid" data-v-cd470dbc><div class="footer-col" data-v-cd470dbc><h3 class="footer-title" data-v-cd470dbc>關於我們</h3><p data-v-cd470dbc>我們致力於提供智能工具，幫助用戶探索法國歷史，通過心智圖和測驗提升學習效率。</p></div><div class="footer-col" data-v-cd470dbc><h3 class="footer-title" data-v-cd470dbc>快速連結</h3><ul class="footer-list" data-v-cd470dbc><li data-v-cd470dbc><a href="/homepage" data-v-cd470dbc>首頁</a></li><li data-v-cd470dbc><a href="/mindmap" data-v-cd470dbc>心智圖</a></li><li data-v-cd470dbc><a href="/quizpage" data-v-cd470dbc>小測驗</a></li></ul></div><div class="footer-col" data-v-cd470dbc><h3 class="footer-title" data-v-cd470dbc>聯繫資訊</h3><ul class="footer-list" data-v-cd470dbc><li data-v-cd470dbc>Email: <a href="mailto:support@example.com" data-v-cd470dbc>support@example.com</a></li><li data-v-cd470dbc>電話: +886 123 456 789</li><li data-v-cd470dbc>地址: 台北市中正區歷史路 123 號</li></ul></div></div><div class="footer-copyright" data-v-cd470dbc><p data-v-cd470dbc>©2025 Spring - AI project</p></div></div>',1)]))}const P={},B=(0,r.A)(P,[["render",U],["__scopeId","data-v-cd470dbc"]]);var E=B,N=t(6525),j=t(4373),T={name:"MindMapUploader",components:{Header:Q,Footer:E},data(){return{mind:null,resultMessage:"",fileName:"",backendUrl:"http://127.0.0.1:5001",processing:!1,progress:0,processStage:"",shortcuts:[{key:"Enter",function:"插入同級節點"},{key:"Tab",function:"插入子節點"},{key:"F1",function:"將導圖置中"},{key:"F2",function:"編輯當前節點"},{key:"↑",function:"選擇上一個同級節點"},{key:"↓",function:"選擇下一個同級節點"},{key:"← / →",function:"選擇父節點 / 第一個子節點"},{key:"PageUp / Alt + ↑",function:"上移節點"},{key:"PageDown / Alt + ↓",function:"下移節點"},{key:"Ctrl + ↑",function:"佈局為「側邊」"},{key:"Ctrl + ←",function:"佈局為「左側」"},{key:"Ctrl + →",function:"佈局為「右側」"},{key:"Ctrl + C",function:"複製當前節點"},{key:"Ctrl + V",function:"貼上複製的節點"},{key:"Ctrl + +",function:"放大導圖"},{key:"Ctrl + -",function:"縮小導圖"},{key:"Ctrl + 0",function:"重置導圖縮放等級"}],example:{nodeData:{id:"root",topic:"中心主題",root:!0,children:[]},linkData:{},direction:1,template:"default"}}},mounted(){const A={el:"#map",direction:N.A.SIDE,draggable:!0,contextMenu:!0,toolBar:!0,nodeMenu:!0,keypress:!0};this.mind=new N.A(A),this.mind.init(this.example)},methods:{handleFileChange(A){this.fileName=A.target.files[0].name},async uploadFile(){const A=this.$refs.fileInput;if(!A.files[0])return void(this.resultMessage='<p class="error">請選擇一個檔案</p>');const e=new FormData;e.append("file",A.files[0]),this.processing=!0,this.progress=0,this.processStage="上傳檔案中",this.resultMessage="";const t=Date.now(),a=7500,s=15e3,l=["上傳檔案中","分析文件中","產生心智圖","進行多重驗證","產生心智圖","進行二次多重驗證","完成"],n=setInterval((()=>{const A=Date.now()-t;if(A<s){const A=5*Math.random();this.progress=Math.min(90,this.progress+A),this.progress<15?this.processStage=l[0]:this.progress<30?this.processStage=l[1]:this.progress<45?this.processStage=l[2]:this.progress<60?this.processStage=l[3]:this.progress<75&&Math.random()>.45?this.processStage=l[4]:this.progress<85&&Math.random()>.78?this.processStage=l[5]:this.progress>=85&&this.progress<100?this.processStage="正在準備":this.progress>=100&&(this.processStage=l[6])}}),300);try{const A=await j.A.post(`${this.backendUrl}/upload`,e,{headers:{"Content-Type":"multipart/form-data"}}),s=this.parseJsonFromResponse(A.data.analysis_result);this.transformTextToTopic(s);const l=Date.now()-t;l<a&&await new Promise((A=>setTimeout(A,a-l))),this.progress=100,this.processStage="完成",setTimeout((()=>{clearInterval(n),this.processing=!1,this.updateMindMap(s,A.data.filename)}),500)}catch(o){clearInterval(n),this.processing=!1,this.resultMessage=`<p class="error">上傳失敗: ${o.response?.data?.error||o.message}</p>`}},transformTextToTopic(A){A.text&&"string"===typeof A.text&&(A.topic=A.text,delete A.text),Array.isArray(A.text)&&(A.topic=A.text.map((A=>"string"===typeof A?A:A.name?`${A.name}（${A.time}）`:JSON.stringify(A))).join("\n"),delete A.text),A.children&&A.children.length>0&&A.children.forEach((A=>this.transformTextToTopic(A)))},async exportPng(){const A=await this.mind.exportPng();if(!A)return;const e=URL.createObjectURL(A),t=document.createElement("a");t.href=e,t.download="mindmap.png",t.click(),URL.revokeObjectURL(e)},async exportSvg(){const A=this.mind.exportSvg();if(!A)return;const e=new Blob([A],{type:"image/svg+xml"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="mindmap.svg",a.click(),URL.revokeObjectURL(t)},exportJson(){const A=this.mind.getData(),e=JSON.stringify(A,null,2),t=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="mindmap.json",s.click(),URL.revokeObjectURL(a)},generateQuiz(){try{const A=this.mind.getData();if(!A||!this.fileName)return void alert("請先上傳並生成心智圖，再產生測驗");const e=encodeURIComponent(JSON.stringify(A));window.location.href=`/quizpage?filename=${encodeURIComponent(this.fileName)}&data=${e}`}catch(A){console.error("產生測驗時發生錯誤:",A),alert("產生測驗失敗，請稍後重試")}},parseJsonFromResponse(A){let e=A;e=e.trim(),e.startsWith("```json")&&(e=e.substring(e.indexOf("\n")+1),-1!==e.lastIndexOf("```")&&(e=e.substring(0,e.lastIndexOf("```"))));try{return e=e.trim(),JSON.parse(e)}catch(t){throw console.error("JSON 解析錯誤:",t),console.log("原始數據:",e),this.resultMessage=`<p class="error">JSON 解析失敗: ${t.message}</p>`,t}},updateMindMap(A,e){this.resultMessage=`<p class="success">檔案 <strong>${e}</strong> 上傳成功！</p>`,this.mind.init({nodeData:A,linkData:{},direction:2,template:"default"})}}};const Y=(0,r.A)(T,[["render",O],["__scopeId","data-v-7cccf1be"]]);var _=Y,I=t(144);const R={class:"quiz-page"},S={key:0,class:"loading-container mx-auto my-5 my-md-10 text-center"},H={key:1,class:"no-data-container mx-auto my-5 my-md-10 text-center"},J={key:2,class:"quiz-container mx-auto px-2 px-md-3 pt-2 overflow-hidden"},G={key:0},K={class:"text-subtitle-1 text-md-h6 font-weight-bold mb-3 mb-md-6"},Z={key:0,class:"d-flex flex-column gap-3"},$={class:"option-text"},AA={key:1,class:"d-flex flex-column gap-3"},eA={key:2,class:"text-center mt-4 mt-md-6"},tA={key:0,class:"text-success font-weight-medium"},aA={key:1,class:"text-error font-weight-medium"},sA={key:1,class:"text-center"},lA={class:"text-subtitle-2 text-md-subtitle-1 mb-2"},nA={class:"text-grey"},oA={class:"d-flex flex-column flex-sm-row justify-center mt-4 mt-md-6 button-container"},rA={class:"text-center text-sm font-bold mb-2"},cA={class:"d-flex flex-column flex-sm-row align-center justify-space-between px-2 px-md-4 progress-container"},iA={class:"text-error font-weight-medium mb-2 mb-sm-0 progress-text"},dA={class:"text-success font-weight-medium mt-2 mt-sm-0 progress-text"};var uA={__name:"QuizPage",setup(A){const e=(0,I.KR)([]),t=(0,I.KR)(0),a=(0,I.KR)(null),l=(0,I.KR)(!1),n=(0,I.KR)(0),o=(0,I.KR)(0),r=(0,I.KR)(0),c=(0,I.KR)(!1),i=(0,I.KR)(!1),d=(0,s.EW)((()=>e.value[t.value])),f=(0,s.EW)((()=>Math.round(r.value/e.value.length*100)));async function v(A=null,t=null){try{if(!A&&(!t||0===Object.keys(t).length))return void console.log("未提供文件名或心智圖數據，顯示歡迎頁面");i.value=!0;const a={filename:A||"",mindMapData:t||{}},s=await j.A.post("/api/quiz/questions",a);console.log("這是response",s),s.data.success&&s.data.questions&&s.data.questions.length>0?e.value=s.data.questions:console.error("獲取問題失敗:",s.data.error||"沒有返回問題")}catch(a){console.error("API請求錯誤:",a),"ERR_CONNECTION_REFUSED"===a.code?alert("無法連接到後端服務器，請確保後端服務器正在運行"):alert("獲取問題失敗，請稍後重試")}finally{i.value=!1}}async function p(){const A=new URLSearchParams(window.location.search),e=A.get("filename"),t=A.get("data");let a=null;if(t)try{a=JSON.parse(decodeURIComponent(t))}catch(l){console.error("解析心智圖數據失敗:",l)}const s=e||t&&a;s?await v(e,a):console.log("直接訪問測驗頁面，顯示歡迎信息")}function m(A){if(!l.value){a.value=A,l.value=!0;const e=A===d.value.correct;e?n.value++:o.value++,r.value++}}function b(){t.value<e.value.length-1?(t.value++,a.value=null,l.value=!1):c.value=!0}function g(){t.value=0,a.value=null,l.value=!1,n.value=0,o.value=0,r.value=0,c.value=!1}async function h(){t.value=0,a.value=null,l.value=!1,n.value=0,o.value=0,r.value=0,c.value=!1;const A=new URLSearchParams(window.location.search),e=A.get("filename"),s=A.get("data");let i=null;if(s)try{i=JSON.parse(decodeURIComponent(s))}catch(d){console.error("解析心智圖數據失敗:",d)}await v(e,i)}return(0,s.sV)((()=>{p()})),(A,v)=>{const p=(0,s.g2)("v-card-title"),k=(0,s.g2)("v-progress-circular"),x=(0,s.g2)("v-card-text"),w=(0,s.g2)("v-card"),y=(0,s.g2)("v-btn"),C=(0,s.g2)("v-icon"),L=(0,s.g2)("v-progress-linear");return(0,s.uX)(),(0,s.CE)("div",R,[(0,s.bF)(Q),i.value?((0,s.uX)(),(0,s.CE)("div",S,[(0,s.bF)(w,{class:"pa-4 pa-md-6 elevation-3 mx-auto loading-card","max-width":"95%",style:{"max-width":"500px",width:"100%"}},{default:(0,s.k6)((()=>[(0,s.bF)(p,{class:"text-h5 text-md-h4 mb-2 mb-md-4"},{default:(0,s.k6)((()=>v[2]||(v[2]=[(0,s.eW)("題目生成中")]))),_:1}),(0,s.bF)(x,{class:"text-center"},{default:(0,s.k6)((()=>[(0,s.bF)(k,{size:60,width:6,color:"primary",indeterminate:"",class:"loading-spinner"}),v[3]||(v[3]=(0,s.Lk)("p",{class:"text-subtitle-2 text-md-subtitle-1 mt-4 mt-md-6"}," 正在為您生成測驗題目，請稍候... ",-1)),v[4]||(v[4]=(0,s.Lk)("p",{class:"text-body-2 text-grey mt-2"}," 根據文件大小和複雜度，這可能需要幾秒鐘的時間。 ",-1)),v[5]||(v[5]=(0,s.Lk)("div",{class:"loading-tips mt-4 mt-md-8 pa-3 pa-md-4"},[(0,s.Lk)("p",{class:"text-caption font-italic"}," 提示：測驗完成後，您可以看到您的答題得分率，幫助您評估對內容的理解程度。 ")],-1))])),_:1})])),_:1})])):(0,s.Q3)("",!0),0!==e.value.length||i.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",H,[(0,s.bF)(w,{class:"pa-4 pa-md-6 elevation-3 mx-auto","max-width":"95%",style:{"max-width":"500px",width:"100%"}},{default:(0,s.k6)((()=>[(0,s.bF)(p,{class:"text-h5 text-md-h4 mb-2 mb-md-4"},{default:(0,s.k6)((()=>v[6]||(v[6]=[(0,s.eW)("歡迎來到測驗頁面")]))),_:1}),(0,s.bF)(x,null,{default:(0,s.k6)((()=>[v[8]||(v[8]=(0,s.Lk)("p",{class:"text-subtitle-2 text-md-subtitle-1 mb-3 mb-md-6"}," 您似乎是直接訪問此頁面，而沒有從心智圖頁面跳轉過來。 ",-1)),v[9]||(v[9]=(0,s.Lk)("p",{class:"mb-4 mb-md-8"}," 為了獲得測驗題目，請先前往心智圖頁面上傳 PDF 文件並生成心智圖， 然後點擊「生成測驗」按鈕來創建針對該內容的測驗問題。 ",-1)),(0,s.bF)(y,{color:"primary",size:"large",href:"/mindmap",class:"mt-2 mt-md-4"},{default:(0,s.k6)((()=>v[7]||(v[7]=[(0,s.eW)(" 前往心智圖頁面 ")]))),_:1})])),_:1})])),_:1})])),e.value.length>0&&d.value&&!i.value?((0,s.uX)(),(0,s.CE)("div",J,[v[22]||(v[22]=(0,s.Lk)("div",{class:"text-center mb-3 mb-md-4 mt-4 mt-md-6"},[(0,s.Lk)("h2",{class:"text-h4 text-md-h3 font-bold text-primary mb-2"},"小測驗")],-1)),(0,s.bF)(w,{class:"pa-3 pa-sm-4 pa-md-6 elevation-3 mx-auto question-card","max-width":"95%"},{default:(0,s.k6)((()=>[(0,s.bF)(x,null,{default:(0,s.k6)((()=>[c.value?((0,s.uX)(),(0,s.CE)("div",sA,[v[21]||(v[21]=(0,s.Lk)("h3",{class:"text-h6 text-md-h5 font-weight-bold mb-3 mb-md-4"}," 🎉 測驗完成 ",-1)),(0,s.Lk)("p",lA," 你答對了 "+(0,u.v_)(n.value)+" / "+(0,u.v_)(e.value.length)+" 題 ",1),(0,s.Lk)("p",nA," 得分率："+(0,u.v_)(Math.round(n.value/e.value.length*100))+"% ",1),(0,s.Lk)("div",oA,[(0,s.bF)(y,{color:"indigo",class:"mb-3 mb-sm-0 mx-sm-3",onClick:g},{default:(0,s.k6)((()=>v[19]||(v[19]=[(0,s.eW)("重新開始")]))),_:1}),(0,s.bF)(y,{color:"success",class:"mx-sm-3",onClick:h},{default:(0,s.k6)((()=>v[20]||(v[20]=[(0,s.eW)("重新生成新題目")]))),_:1})])])):((0,s.uX)(),(0,s.CE)("div",G,[(0,s.Lk)("h3",K,(0,u.v_)(t.value+1)+". "+(0,u.v_)(d.value.question),1),"single"===d.value.type?((0,s.uX)(),(0,s.CE)("div",Z,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(d.value.options,((A,e)=>((0,s.uX)(),(0,s.Wv)(y,{key:`${e}-${t.value}`,class:(0,u.C4)(["justify-start text-left option-btn",{"text-grey":l.value&&e!==a.value&&e!==d.value.correct,"text-error":l.value&&e===a.value&&e!==d.value.correct,"text-success":l.value&&e===d.value.correct}]),variant:"outlined",disabled:l.value,onClick:A=>m(e)},{default:(0,s.k6)((()=>[(0,s.Lk)("span",$,(0,u.v_)(A),1),l.value&&e===d.value.correct?((0,s.uX)(),(0,s.Wv)(C,{key:0,color:"green",class:"ml-2 result-icon"},{default:(0,s.k6)((()=>v[10]||(v[10]=[(0,s.eW)("mdi-check")]))),_:1})):(0,s.Q3)("",!0),l.value&&e===a.value&&e!==d.value.correct?((0,s.uX)(),(0,s.Wv)(C,{key:1,color:"red",class:"ml-2 result-icon"},{default:(0,s.k6)((()=>v[11]||(v[11]=[(0,s.eW)("mdi-close")]))),_:1})):(0,s.Q3)("",!0)])),_:2},1032,["disabled","class","onClick"])))),128))])):"true-false"===d.value.type?((0,s.uX)(),(0,s.CE)("div",AA,[(0,s.bF)(y,{class:(0,u.C4)(["justify-start text-left option-btn",{"text-grey":l.value&&null!==a.value&&!0!==a.value&&!0!==d.value.correct,"text-success":l.value&&!0===d.value.correct,"text-error":l.value&&!0===a.value&&!0!==d.value.correct}]),variant:"outlined",disabled:l.value,onClick:v[0]||(v[0]=A=>m(!0))},{default:(0,s.k6)((()=>[v[14]||(v[14]=(0,s.Lk)("span",{class:"option-text"},"𐤏",-1)),l.value&&!0===d.value.correct?((0,s.uX)(),(0,s.Wv)(C,{key:0,color:"green",class:"ml-2 result-icon"},{default:(0,s.k6)((()=>v[12]||(v[12]=[(0,s.eW)("mdi-check")]))),_:1})):(0,s.Q3)("",!0),l.value&&!0===a.value&&!0!==d.value.correct?((0,s.uX)(),(0,s.Wv)(C,{key:1,color:"red",class:"ml-2 result-icon"},{default:(0,s.k6)((()=>v[13]||(v[13]=[(0,s.eW)("mdi-close")]))),_:1})):(0,s.Q3)("",!0)])),_:1},8,["disabled","class"]),(0,s.bF)(y,{class:(0,u.C4)(["justify-start text-left option-btn",{"text-grey":l.value&&null!==a.value&&!1!==a.value&&!1!==d.value.correct,"text-success":l.value&&!1===d.value.correct,"text-error":l.value&&!1===a.value&&!1!==d.value.correct}]),variant:"outlined",disabled:l.value,onClick:v[1]||(v[1]=A=>m(!1))},{default:(0,s.k6)((()=>[v[17]||(v[17]=(0,s.Lk)("span",{class:"option-text"},"✕",-1)),l.value&&!1===d.value.correct?((0,s.uX)(),(0,s.Wv)(C,{key:0,color:"green",class:"ml-2 result-icon"},{default:(0,s.k6)((()=>v[15]||(v[15]=[(0,s.eW)("mdi-check")]))),_:1})):(0,s.Q3)("",!0),l.value&&!1===a.value&&!1!==d.value.correct?((0,s.uX)(),(0,s.Wv)(C,{key:1,color:"red",class:"ml-2 result-icon"},{default:(0,s.k6)((()=>v[16]||(v[16]=[(0,s.eW)("mdi-close")]))),_:1})):(0,s.Q3)("",!0)])),_:1},8,["disabled","class"])])):(0,s.Q3)("",!0),l.value?((0,s.uX)(),(0,s.CE)("div",eA,[a.value===d.value.correct?((0,s.uX)(),(0,s.CE)("p",tA," 回答正確！ ")):((0,s.uX)(),(0,s.CE)("p",aA,"回答錯誤！")),(0,s.bF)(y,{class:"mt-3 mt-md-4",color:"primary",onClick:b},{default:(0,s.k6)((()=>v[18]||(v[18]=[(0,s.eW)("下一題")]))),_:1})])):(0,s.Q3)("",!0)]))])),_:1})])),_:1}),(0,s.bF)(w,{class:"mt-4 mt-md-6 py-2 progress-card",color:"grey-lighten-3",flat:"",tile:""},{default:(0,s.k6)((()=>[(0,s.bF)(x,{class:"px-1 px-sm-2"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",rA,(0,u.v_)(r.value)+" / "+(0,u.v_)(e.value.length),1),(0,s.Lk)("div",cA,[(0,s.Lk)("span",iA," 錯誤："+(0,u.v_)(o.value),1),((0,s.uX)(),(0,s.Wv)(L,{key:f.value,"model-value":f.value,color:"blue",height:"10",rounded:"",class:"progress-bar mx-auto mx-sm-0"},null,8,["model-value"])),(0,s.Lk)("span",dA," 正確："+(0,u.v_)(n.value),1)])])),_:1})])),_:1})])):(0,s.Q3)("",!0),(0,s.bF)(E)])}}};const fA=(0,r.A)(uA,[["__scopeId","data-v-1684d68c"]]);var vA=fA,pA={__name:"HomePage",setup(A){return(A,e)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(Q),e[0]||(e[0]=(0,s.Fv)('<section class="hero-section" data-v-738fbf70><div class="overlay" data-v-738fbf70></div><div class="hero-content" data-v-738fbf70><h1 class="hero-title" data-v-738fbf70>法國歷史全覽圖</h1><p class="hero-subtitle" data-v-738fbf70>破解原文，一圖讀懂</p><a href="/mindmap" data-v-738fbf70><button class="cta-button" data-v-738fbf70>開始!</button></a></div></section><section class="features-section" data-v-738fbf70><div class="features-container" data-v-738fbf70><div class="feature-card" data-v-738fbf70><h3 class="feature-title" data-v-738fbf70>🧠自動生成心智圖</h3><ul class="feature-list" data-v-738fbf70><li data-v-738fbf70>上傳PDF</li><li data-v-738fbf70>智能提取關鍵詞</li><li data-v-738fbf70>快速生成可編輯心智圖</li></ul></div><div class="feature-card" data-v-738fbf70><h3 class="feature-title" data-v-738fbf70>✏️互動編輯與匯出</h3><ul class="feature-list" data-v-738fbf70><li data-v-738fbf70>自由編輯心智圖</li><li data-v-738fbf70>輕鬆添加刪除節點</li><li data-v-738fbf70>一鍵匯出高品質PNG</li></ul></div><div class="feature-card" data-v-738fbf70><h3 class="feature-title" data-v-738fbf70>❓智能測驗助學習</h3><ul class="feature-list" data-v-738fbf70><li data-v-738fbf70>定制小測驗</li><li data-v-738fbf70>檢驗歷史知識掌握</li><li data-v-738fbf70>鞏固學習成果</li></ul></div></div></section>',2)),(0,s.bF)(E)],64))}};const mA=(0,r.A)(pA,[["__scopeId","data-v-738fbf70"]]);var bA=mA;const gA=[{path:"/",redirect:"/homepage"},{path:"/mindmap",name:"MindMap",component:_},{path:"/quizpage",name:"QuizPage",component:vA},{path:"/homepage",name:"HomePage",component:bA}],hA=(0,d.aE)({history:(0,d.LA)(),routes:gA});var kA=hA,xA=(t(5524),t(5753)),wA=t(6202),yA=t(3425),CA=(0,xA.$N)({components:wA,directives:yA});j.A.defaults.baseURL="http://localhost:5001",j.A.defaults.headers.common["Content-Type"]="application/json",j.A.defaults.withCredentials=!0,j.A.interceptors.request.use((A=>(A.withCredentials=!0,A)),(A=>Promise.reject(A))),(0,a.Ef)(i).use(kA).use(CA).mount("#app")}},e={};function t(a){var s=e[a];if(void 0!==s)return s.exports;var l=e[a]={exports:{}};return A[a].call(l.exports,l,l.exports,t),l.exports}t.m=A,function(){var A=[];t.O=function(e,a,s,l){if(!a){var n=1/0;for(i=0;i<A.length;i++){a=A[i][0],s=A[i][1],l=A[i][2];for(var o=!0,r=0;r<a.length;r++)(!1&l||n>=l)&&Object.keys(t.O).every((function(A){return t.O[A](a[r])}))?a.splice(r--,1):(o=!1,l<n&&(n=l));if(o){A.splice(i--,1);var c=s();void 0!==c&&(e=c)}}return e}l=l||0;for(var i=A.length;i>0&&A[i-1][2]>l;i--)A[i]=A[i-1];A[i]=[a,s,l]}}(),function(){t.n=function(A){var e=A&&A.__esModule?function(){return A["default"]}:function(){return A};return t.d(e,{a:e}),e}}(),function(){t.d=function(A,e){for(var a in e)t.o(e,a)&&!t.o(A,a)&&Object.defineProperty(A,a,{enumerable:!0,get:e[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(A){if("object"===typeof window)return window}}()}(),function(){t.o=function(A,e){return Object.prototype.hasOwnProperty.call(A,e)}}(),function(){t.r=function(A){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})}}(),function(){var A={524:0};t.O.j=function(e){return 0===A[e]};var e=function(e,a){var s,l,n=a[0],o=a[1],r=a[2],c=0;if(n.some((function(e){return 0!==A[e]}))){for(s in o)t.o(o,s)&&(t.m[s]=o[s]);if(r)var i=r(t)}for(e&&e(a);c<n.length;c++)l=n[c],t.o(A,l)&&A[l]&&A[l][0](),A[l]=0;return t.O(i)},a=self["webpackChunkmind"]=self["webpackChunkmind"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=t.O(void 0,[504],(function(){return t(6199)}));a=t.O(a)})();
//# sourceMappingURL=app.499cc4fe.js.map